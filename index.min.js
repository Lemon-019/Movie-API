/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/movie-trailer@3.2.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";!function(e,t){"function"==typeof define&&define.amd?define(["isomorphic-fetch"],t):"object"==typeof exports?module.exports=t(require("isomorphic-fetch")):e.movieTrailer=t(e.fetch)}(this,(e=>{function t(e){const t=e&&e.message?e.message:e;console.warn(`movie-trailer: ${t}`)}function n(e){if(!e.ok)throw new Error(e.statusText);return e}function o(r,i){const a=i&&"tv"===i.videoType?"/3/search/tv?api_key=":"/3/search/movie?api_key=",u="https://api.themoviedb.org"+encodeURI(a+i.apiKey+"&query="+r+(null===i.year?"":"&year="+i.year)+(null===i.language?"":"&language="+i.language));return e(u,{method:"GET"}).then(n).then((e=>e.json())).then((e=>{if(void 0!==e.status_message)throw new TypeError(e.status_message);if(0===e.results.length){if(null!==i.year){const{year:e,...t}=i;return o(r,t)}throw new Error(`No TMDB Movie found with that search query, try searching https://www.themoviedb.org/search?query=${encodeURIComponent(r)} to verify one exists`)}return e.results[0].id})).catch((e=>(t(e),null)))}function r(o,r){const i=r&&"tv"===r.videoType?"/3/tv/":"/3/movie/",a="https://api.themoviedb.org"+encodeURI(i+o+"/videos?api_key="+r.apiKey+(null===r.language?"":"&language="+r.language));return e(a,{method:"GET"}).then(n).then((e=>e.json())).then((e=>{if(void 0!==e.status_message)throw new TypeError(`movie-trailer: ${e.status_message}`);if(0===e.results.length)throw new Error("No trailers found for that TMDB ID");let{results:t}=e;return t=t.map((e=>e.key)),r.id||(t=t.map((e=>function(e){return encodeURI("https://www.youtube.com/watch?v="+e)}(e)))),r.multi?[...new Set(t)]:t[0]})).catch((e=>(t(e),null)))}return async function(e,n,i,a){let u={multi:!1,id:!1,year:null,language:null,videoType:"movie",apiKey:"9d2bff12ed955c7f1f74b83187f188ae"};if(n||(n={}),"string"!=typeof e&&!n.tmdbId)throw new Error("Expected first parameter to be a movie or TMDB ID (string)");"function"==typeof n?(i=n,n=null):"boolean"==typeof n||"true"===n?u.multi=n:"string"==typeof n||"number"==typeof n?(u.year=n,"function"==typeof a&&("boolean"==typeof i||"string"==typeof i&&"true"===i)&&(u.multi=i,i=a)):"object"==typeof n&&(u=Object.assign(u,n)),"function"!=typeof i&&(i=null);const s=u.tmdbId?u.tmdbId:await o(e,u).catch((e=>(t(e),null)));if(!s)return null;const l=r(s,u);return l?i?l.then((e=>i(null,e))).catch((e=>i(e,null))):l:null}}));
//# sourceMappingURL=/sm/b9774396e3a7d07809dc6cff65523b999da34866e98cfad368bf21188fcfa522.map